import{a as u}from"./constants-BUW7qVOF.js";import{k as s}from"./helpers-BKPUiegI.js";import{s as r}from"./index-Ct-zUf6z.js";async function y(t,e,o){const{field:n,value:i,filterMethod:l}=t;let a=r.from("bookings").select("id, created_at, startDate, endDate, numNights, numGuests, status, totalPrice, cabins(name), guests(fullName, email)",{count:"exact"});if(i&&a[l](n,i),e.sortField&&a.order(e.sortField,{ascending:e.sortDirection==="asc"}),o){const d=u*(o-1),k=d+u-1;a.range(d,k)}const{data:g,error:c,count:f}=await a;if(c)throw console.error(c),new Error("Bookings could not get loaded");return{bookings:g,count:f}}async function B(t){const{data:e,error:o}=await r.from("bookings").select("*, cabins(*), guests(*)").eq("id",t).single();if(o)throw console.error(o),new Error("Booking not found");return e}async function h(t){const{data:e,error:o}=await r.from("bookings").select("id, created_at, extrasPrice, totalPrice").lte("created_at",s({end:!0})).gte("created_at",t);if(o)throw console.error(o),new Error("Bookings could not get loaded");return e}async function E(t){const{data:e,error:o}=await r.from("bookings").select("*, guests(fullName)").gte("startDate",t).lte("startDate",s());if(o)throw console.error(o),new Error("Bookings could not get loaded");return e}async function D(){const{data:t,error:e}=await r.from("bookings").select("*, guests(fullName, nationality, countryFlag)").or(`and(status.eq.unconfirmed,startDate.eq.${s()}),and(status.eq.checked-in,endDate.eq.${s()})`).order("created_at");if(e)throw console.error(e),new Error("Bookings could not get loaded");return t}async function p(t,e){const{data:o,error:n}=await r.from("bookings").update(e).eq("id",t).select().single();if(n)throw console.error(n),new Error("Booking could not be updated");return o}async function q(t){const{data:e,error:o}=await r.from("bookings").delete().eq("id",t);if(o)throw console.error(o),new Error("Booking could not be deleted");return e}async function _(t){const{data:e,error:o}=await r.from("bookings").insert([t]);if(o)throw console.log(o.message),new Error("Booking couldn't be uploaded");return e}export{_ as a,B as b,h as c,q as d,E as e,D as f,y as g,p as u};
