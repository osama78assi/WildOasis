import{k as j,u as F,a7 as S,_ as p,j as s,g as f,r as v,h as y,i as C}from"./index-3miXUnVq.js";import{u as q}from"./index.esm-D2Wd5_JB.js";import{F as d}from"./FormRow-DV40d1P4.js";import{a as E,I as o}from"./Input-C1EfaEfr.js";import{F as P}from"./FormRowButtons-DmUZOSpM.js";function M(){const r=j(),{mutate:e,isPending:n}=F({mutationFn:S,onSuccess:({user:i})=>{r.invalidateQueries(["user"],i),p.success("Account successfully created. Please verfiy the new account from the user's email address.")},onError:i=>i.message!=="Cannot read properties of null (reading 'keepDefaultValues')"&&p.error(i.message)});return{signup:e,isLoading:n}}function W(){var l,c,m,h;const{register:r,formState:{errors:e},getValues:n,handleSubmit:i,reset:u}=q(),{signup:w,isLoading:t}=M();function g({fullName:a,email:x,password:b}){a=a.trim(),w({fullName:a,email:x,password:b},{onSettled:u})}return s.jsxs(E,{onSubmit:i(g),children:[s.jsx(d,{label:"Full name",error:(l=e==null?void 0:e.fullName)==null?void 0:l.message,withError:!0,children:s.jsx(o,{$full:!0,disabled:t,type:"text",id:"fullName",...r("fullName",{required:"This feild is required",validate:a=>{if(a.length>20)return"Full name length should be less or equal 20 characters";if(a.trim().split(" ").length>2)return"Full name should contain one space"}})})}),s.jsx(d,{label:"Email address",error:(c=e==null?void 0:e.email)==null?void 0:c.message,withError:!0,children:s.jsx(o,{$full:!0,disabled:t,type:"email",id:"email",...r("email",{required:"This feild is required",pattern:{value:/\S+@\S+\.\S+/,message:"Please provide a valid email address"}})})}),s.jsx(d,{label:"Password (min 8 characters, contains special chars & numbers)",error:(m=e==null?void 0:e.password)==null?void 0:m.message,withError:!0,children:s.jsx(o,{$full:!0,disabled:t,type:"password",id:"password",...r("password",{required:"This feild is required",minLength:{value:8,message:"Password must be a miniumum of 8 characters"},pattern:{value:/(\W+\d+\w*|\d+\W+\w*|\W+\w*\d+|\d+\w*\W+|\w*\W+\d+|\w*\d+\W+)/,message:"password should contain special character and numbers"},validate:a=>{if(a.includes(" "))return"Password shouldn't contain a space"}})})}),s.jsx(d,{label:"Confirm password",withError:!0,error:(h=e==null?void 0:e.passwordConfirm)==null?void 0:h.message,children:s.jsx(o,{$full:!0,disabled:t,type:"password",id:"passwordConfirm",...r("passwordConfirm",{required:"This feild is required",validate:a=>a===n().password||"Password isn't matched"})})}),s.jsxs(P,{children:[s.jsx(f,{onClick:u,$variation:"secondary",type:"reset",disabled:t,children:"Cancel"}),s.jsx(f,{disabled:t,children:"Create new user"})]})]})}function Q(){const[r,e]=v.useState("h1");return y(500,()=>e("h2"),()=>e("h1")),s.jsxs(s.Fragment,{children:[s.jsx(C,{as:r,children:"Create a new user"}),s.jsx(W,{})]})}export{Q as default};
