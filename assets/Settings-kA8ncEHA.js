import{k as b,u as j,_ as d,j as e,p as k,r as y,h as S,i as B}from"./index-D_d7XbGv.js";import{E as M,u as E,R as F}from"./ErrorMsg-B8T-cWBi.js";import{a as R,u as P}from"./useSettings-hYwb9VJu.js";import{a as U,I as o}from"./Input-tUxhhbqs.js";import{F as u}from"./FormRow-Dj7k1ktD.js";import{R as g}from"./Row-CZNi0Cy-.js";function L(){const n=b(),{mutate:i,isPending:a}=j({mutationFn:R,onSuccess:()=>{d.success("Settings updated sccessfully"),n.invalidateQueries({queryKey:["settings"]})},onError:t=>d.error(t)});return{updateSettings:i,isEditing:a}}function V(){const{isPending:n,settings:i,error:a}=P(),{isEditing:t,updateSettings:l}=L();if(n)return e.jsx(k,{});if(a)return d.error("Settings couldn't be loaded",{duration:5e3}),e.jsx(M,{faildFor:"settings",queryKey:["settings"]});function r(s,x){const{value:c}=s.target;c&&l({[x]:c})}const{minBookingLength:m,maxBookingLength:h,maxGuestsPerBooking:f,breakfastPrice:p}=i;return e.jsxs(U,{children:[e.jsx(u,{label:"Minimum nights/booking",children:e.jsx(o,{type:"number",id:"min-nights",defaultValue:m,disabled:t,onBlur:s=>r(s,"minBookingLength")})}),e.jsx(u,{label:"Maximum nights/booking",children:e.jsx(o,{type:"number",id:"max-nights",defaultValue:h,disabled:t,onBlur:s=>r(s,"maxBookingLength")})}),e.jsx(u,{label:"Maximum guests/booking",children:e.jsx(o,{type:"number",id:"max-guests",defaultValue:f,disabled:t,onBlur:s=>r(s,"maxGuestsPerBooking")})}),e.jsx(u,{label:"Breakfast price",children:e.jsx(o,{type:"number",id:"breakfast-price",defaultValue:p,disabled:t,onBlur:s=>r(s,"breakfastPrice")})})]})}function H(){const{isFetching:n,reFetch:i}=E(),[a,t]=y.useState("h1");return S(500,()=>t("h2"),()=>t("h1")),e.jsxs(g,{children:[e.jsxs(g,{$type:"horizontal",children:[e.jsx(B,{as:a,children:"Update hotel settings"}),e.jsx(F,{isFetching:n,disabled:n,onClick:i})]}),e.jsx(V,{})]})}export{H as default};
